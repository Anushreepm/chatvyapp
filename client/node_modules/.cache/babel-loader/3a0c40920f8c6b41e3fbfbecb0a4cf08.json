{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\project\\\\chat App\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\project\\\\chat App\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:\\\\project\\\\chat App\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{ToastContainer,toast}from\"react-toastify\";import{Link}from\"react-router-dom\";import{authenticate,isAuth}from\"./utils/helper\";import\"react-toastify/dist/ReactToastify.css\";import Layout from\"./Layout\";import axios from\"axios\";function Login(props){var history=props.history;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var handleSubmit=function handleSubmit(e){e.preventDefault();e.stopPropagation();// checkLogin(obj);\nvar obj={email:email,password:password};checkLogin(obj);console.log(obj);setEmail(\"\");setPassword(\"\");};var checkLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(obj){var config,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;config={headers:{\"Content-Type\":\"application/json\"}};_context.next=4;return axios.post(\"http://localhost:5000/auth/signin\",obj,config);case 4:res=_context.sent;console.log(res.data);setSuccess(res.data.success);setMessage(res.data.message);displayMessage();_context.next=18;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0.response.data);setSuccess(_context.t0.response.data.success);setMessage(_context.t0.response.data.message);displayMessage();return _context.abrupt(\"return\",_context.t0);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function checkLogin(_x){return _ref.apply(this,arguments);};}();var displayMessage=function displayMessage(){if(success===false){if(message!==\"\"){toast.error(message,{position:\"top-right\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}}};useEffect(function(){if(success){history.push(\"/join\");}else if(success===false){if(message!==\"\"){toast.error(message,{position:\"top-right\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}}},[success,message]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ToastContainer,{position:\"top-right\",autoClose:5000,hideProgressBar:false,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnFocusLoss:true,draggable:true,pauseOnHover:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"login-page\"},/*#__PURE__*/React.createElement(\"a\",{href:\"/\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/home.png\",alt:\"homepage\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"login-header\"},\"Enter details for login\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,className:\"signin-container\"},/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{for:\"exampleInputEmail1\"},\"Email address\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",class:\"form-control\",id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter your Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/React.createElement(\"small\",{id:\"emailHelp\",class:\"form-text text-muted\"},\"We'll never share your email with anyone else.\")),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{for:\"exampleInputPassword1\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",class:\"form-control\",id:\"exampleInputPassword1\",placeholder:\"Enter your Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"forgot-password\"},/*#__PURE__*/React.createElement(\"a\",{href:\"http://localhost:3000/auth/forgot-password\",target:\"_blank\"},\"forgot password ?\")),/*#__PURE__*/React.createElement(\"div\",{className:\"signin-button\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",class:\"btn btn-primary\"},\"Signin\"))),/*#__PURE__*/React.createElement(\"br\",null)));}export default Login;","map":{"version":3,"sources":["E:/project/chat App/client/src/components/loginsignup/login.js"],"names":["React","useState","useEffect","ToastContainer","toast","Link","authenticate","isAuth","Layout","axios","Login","props","history","email","setEmail","password","setPassword","success","setSuccess","message","setMessage","handleSubmit","e","preventDefault","stopPropagation","obj","checkLogin","console","log","config","headers","post","res","data","displayMessage","response","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","push","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { authenticate, isAuth } from \"./utils/helper\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Layout from \"./Layout\";\r\nimport axios from \"axios\";\r\n\r\nfunction Login(props) {\r\n  const { history } = props;\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [success, setSuccess] = useState();\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    // checkLogin(obj);\r\n    const obj = {\r\n      email: email,\r\n      password: password,\r\n    };\r\n    checkLogin(obj);\r\n    console.log(obj);\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n  };\r\n\r\n  const checkLogin = async (obj) => {\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      };\r\n\r\n      const res = await axios.post(\r\n        \"http://localhost:5000/auth/signin\",\r\n        obj,\r\n        config\r\n      );\r\n      console.log(res.data);\r\n\r\n      setSuccess(res.data.success);\r\n      setMessage(res.data.message);\r\n      displayMessage();\r\n    } catch (err) {\r\n      console.log(err.response.data);\r\n      setSuccess(err.response.data.success);\r\n      setMessage(err.response.data.message);\r\n      displayMessage();\r\n      return err;\r\n    }\r\n  };\r\n\r\n  const displayMessage = () => {\r\n    if (success === false) {\r\n      if (message !== \"\") {\r\n        toast.error(message, {\r\n          position: \"top-right\",\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (success) {\r\n      history.push(\"/join\");\r\n    } else if (success === false) {\r\n      if (message !== \"\") {\r\n        toast.error(message, {\r\n          position: \"top-right\",\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      }\r\n    }\r\n  }, [success, message]);\r\n\r\n  return (\r\n    <>\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={5000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n      />\r\n      <div className=\"login-page\">\r\n        <a href=\"/\">\r\n          <img src=\"/home.png\" alt=\"homepage\" />\r\n        </a>\r\n\r\n        <div className=\"login-header\">Enter details for login</div>\r\n        <form onSubmit={handleSubmit} className=\"signin-container\">\r\n          <div class=\"form-group\">\r\n            <label for=\"exampleInputEmail1\">Email address</label>\r\n            <input\r\n              type=\"email\"\r\n              class=\"form-control\"\r\n              id=\"exampleInputEmail1\"\r\n              aria-describedby=\"emailHelp\"\r\n              placeholder=\"Enter your Email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n            <small id=\"emailHelp\" class=\"form-text text-muted\">\r\n              We'll never share your email with anyone else.\r\n            </small>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"exampleInputPassword1\">Password</label>\r\n            <input\r\n              type=\"password\"\r\n              class=\"form-control\"\r\n              id=\"exampleInputPassword1\"\r\n              placeholder=\"Enter your Password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"forgot-password\">\r\n            <a\r\n              href=\"http://localhost:3000/auth/forgot-password\"\r\n              target=\"_blank\"\r\n            >\r\n              forgot password ?\r\n            </a>\r\n          </div>\r\n          <div className=\"signin-button\">\r\n            <button type=\"submit\" class=\"btn btn-primary\">\r\n              Signin\r\n            </button>\r\n          </div>\r\n        </form>\r\n        <br />\r\n        {/* <Link\r\n          to=\"http://localhost:3000/auth/password/forgot\"\r\n          className=\"btn btn-sm btn-outline-danger\"\r\n        >\r\n          Forgot Password\r\n        </Link> */}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}